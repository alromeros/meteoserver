#!/bin/bash

sleep 1

# First iteration
for id in {001..200};
do
  echo "get test$id $id" | nc localhost $1
done

# Invalid requests 1
echo "get test 10 43 92" | nc localhost $1
echo "a" | nc localhost $1
echo "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 10" | nc localhost $1

# SIGUSR1
kill -USR1 $(pidof meteoserver)
kill -USR1 $(pidof meteoserver)
kill -USR1 $(pidof meteoserver)

sleep 1

# Second iteration
for id in {001..200};
do
  echo "get test$id $id" | nc localhost $1
done

# Invalid requests 2
echo "get 1" | nc localhost $1
echo "set" | nc localhost $1
echo "" | nc localhost $1
nc localhost $1 &
echo "get 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 10" | nc localhost $1
sleep 1

# SIGTERM
kill -TERM $(pidof meteoserver)
